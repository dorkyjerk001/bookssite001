<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tikki from Miraculous Ladybug</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

  body, html {
    margin: 0; padding: 0;
    height: 100%;
    background: radial-gradient(circle at center, #0b0b1a 0%, #000000 90%);
    font-family: 'Orbitron', monospace, sans-serif;
    color: #ff2a2a;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    user-select: none;
    overflow: hidden;
  }

  h1 {
    font-size: 3rem;
    text-shadow:
      0 0 10px #ff1a1a,
      0 0 20px #ff4d4d,
      0 0 40px #ff6600;
    margin-top: 2rem;
  }

  .gallery {
    display: flex;
    gap: 3rem;
    max-width: 90vw;
    justify-content: center;
    flex-wrap: wrap;
    position: relative;
    width: 100%;
    height: 500px; /* fixed height for physics canvas */
  }

  .gallery img {
    max-width: 400px;
    max-height: 400px;
    border-radius: 20px;
    box-shadow:
      0 0 20px #ff3300,
      inset 0 0 40px #ff6600;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    position: absolute;
    user-select: none;
  }
  .gallery img:hover {
    transform: scale(1.1) rotate(3deg);
    box-shadow:
      0 0 40px #ff6600,
      inset 0 0 60px #ff9933;
    z-index: 10;
  }

  /* Fullscreen modal */
  #modal {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.95);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    cursor: zoom-out;
  }
  #modal.active {
    display: flex;
  }
  #modal img {
    max-width: 90vw;
    max-height: 90vh;
    border-radius: 20px;
    box-shadow:
      0 0 60px #ff6600aa;
    transition: transform 0.3s ease;
  }
</style>
</head>
<body>

<h1>Tikki from Miraculous Ladybug</h1>

<div class="gallery" aria-label="Tikki image gallery" id="gallery">
  <img src="1screen001.jpg" alt="Tikki action shot" tabindex="0" />
  <img src="1totem001.jpg" alt="Tikki close up" tabindex="0" />
</div>

<div id="modal" role="dialog" aria-modal="true" aria-label="Fullscreen image viewer" tabindex="-1">
  <img src="" alt="" />
</div>

<!-- Matter.js physics engine -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

<script>
  // Modal logic (unchanged)
  const galleryImages = document.querySelectorAll('.gallery img');
  const modal = document.getElementById('modal');
  const modalImg = modal.querySelector('img');

  galleryImages.forEach(img => {
    img.addEventListener('click', () => openModal(img));
    img.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openModal(img);
      }
    });
  });

  function openModal(img) {
    modalImg.src = img.src;
    modalImg.alt = img.alt;
    modal.classList.add('active');
    modal.focus();
  }

  modal.addEventListener('click', e => {
    if (e.target === modal) {
      modal.classList.remove('active');
      modalImg.src = '';
      modalImg.alt = '';
    }
  });

  window.addEventListener('keydown', e => {
    if (modal.classList.contains('active') && (e.key === 'Escape' || e.key === 'Enter' || e.key === ' ')) {
      modal.classList.remove('active');
      modalImg.src = '';
      modalImg.alt = '';
    }
  });

  // === Physics setup ===
  const { Engine, Render, Runner, World, Bodies, Body, Events, Mouse, MouseConstraint } = Matter;

  const engine = Engine.create();
  const world = engine.world;
  world.gravity.y = 0.7;

  const gallery = document.getElementById('gallery');
  const imgs = Array.from(galleryImages);
  const imgBodies = [];

  // We'll position images absolutely and sync their positions with physics bodies
  // Set initial positions in a row
  const galleryRect = gallery.getBoundingClientRect();
  const IMG_SIZE = 220;

  // Create physics bodies for each image
  imgs.forEach((img, i) => {
    // Start positions spaced horizontally
    const startX = galleryRect.width / 2 - ((imgs.length - 1) * (IMG_SIZE + 30)) / 2 + i * (IMG_SIZE + 30);
    const startY = galleryRect.height / 2;

    // Position images absolutely initially
    img.style.left = `${startX - IMG_SIZE/2}px`;
    img.style.top = `${startY - IMG_SIZE/2}px`;
    img.style.width = IMG_SIZE + 'px';
    img.style.height = IMG_SIZE + 'px';

    // Create physics body
    const body = Bodies.rectangle(startX, startY, IMG_SIZE, IMG_SIZE, {
      restitution: 0.7,
      friction: 0.3,
      frictionAir: 0.02,
      angle: Math.random() * Math.PI * 2,
      inertia: Infinity
    });
    body.img = img;
    imgBodies.push(body);
  });

  World.add(world, imgBodies);

  // Create invisible walls around gallery container
  const thickness = 100;
  const walls = [
    Bodies.rectangle(galleryRect.width/2, -thickness/2, galleryRect.width, thickness, { isStatic: true }),
    Bodies.rectangle(galleryRect.width/2, galleryRect.height + thickness/2, galleryRect.width, thickness, { isStatic: true }),
    Bodies.rectangle(-thickness/2, galleryRect.height/2, thickness, galleryRect.height, { isStatic: true }),
    Bodies.rectangle(galleryRect.width + thickness/2, galleryRect.height/2, thickness, galleryRect.height, { isStatic: true }),
  ];
  World.add(world, walls);

  // Mouse control for dragging images
  const mouse = Mouse.create(gallery);
  const mouseConstraint = MouseConstraint.create(engine, {
    mouse: mouse,
    constraint: {
      stiffness: 0.2,
      render: { visible: false }
    }
  });
  World.add(world, mouseConstraint);

  // Apply random turbulence forces each update
  Events.on(engine, 'beforeUpdate', () => {
    imgBodies.forEach(body => {
      const forceMagnitude = 0.0005 * body.mass;
      Body.applyForce(body, body.position, {
        x: (Math.random() - 0.5) * forceMagnitude,
        y: (Math.random() - 0.5) * forceMagnitude
      });
      Body.setAngularVelocity(body, body.angularVelocity + (Math.random() - 0.5) * 0.001);
    });
  });

  // Update image positions every frame
  (function update() {
    imgBodies.forEach(body => {
      const { x, y } = body.position;
      const angle = body.angle;
      const img = body.img;
      img.style.left = (x - IMG_SIZE/2) + 'px';
      img.style.top = (y - IMG_SIZE/2) + 'px';
      img.style.transform = `rotate(${angle}rad)`;
    });
    requestAnimationFrame(update);
  })();

  // Run the engine
  const runner = Runner.create();
  Runner.run(runner, engine);

  // Handle window resize: update walls and reposition images
  window.addEventListener('resize', () => {
    const rect = gallery.getBoundingClientRect();

    // Update walls positions
    Body.setPosition(walls[0], { x: rect.width/2, y: -thickness/2 });
    Body.setPosition(walls[1], { x: rect.width/2, y: rect.height + thickness/2 });
    Body.setPosition(walls[2], { x: -thickness/2, y: rect.height/2 });
    Body.setPosition(walls[3], { x: rect.width + thickness/2, y: rect.height/2 });

    // Reposition images roughly to center
    imgBodies.forEach((body, i) => {
      const startX = rect.width / 2 - ((imgBodies.length - 1) * (IMG_SIZE + 30)) / 2 + i * (IMG_SIZE + 30);
      const startY = rect.height / 2;
      Body.setPosition(body, { x: startX, y: startY });
      Body.setVelocity(body, { x: 0, y: 0 });
      Body.setAngularVelocity(body, 0);
    });
  });
</script>

</body>
</html>